name: service-mesh-hub
requiredValues:
  - Version
values:
  Namespace: sm-marketplace
resources:
  - namespace:
      name: sm-marketplace
  - secret:
      name: github-token
      entries:
        token:
          envVar: GITHUB_TOKEN
  - secret:
      name: aws-cred
      entries:
        credentials:
          file: $HOME/.aws/credentials
  - secret:
      name: remote-kube-config
      type: solo.io/kubeconfig
      entries:
        smh-kubecon-eks:
          file: $HOME/.kube/eksctl/clusters/smh-kubecon-eks
  - helmChart:
      repoUrl: "https://storage.googleapis.com/sm-marketplace-helm/"
      chartName: sm-marketplace
      repoName: sm-marketplace
      set:
        - "namespace.create=true"
  - application:
      path: registry/apps/gloo-app.yaml
    values:
      VirtualServiceName: smh
      Namespace: sm-marketplace
      UpstreamName: sm-marketplace-smm-apiserver-8080
      UpstreamNamespace: gloo-system
    flags:
      - gloo-app